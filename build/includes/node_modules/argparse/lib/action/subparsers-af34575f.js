"use strict";function ChoicesPseudoAction(r,e){var s={optionStrings:[],dest:r,help:e};Action.call(this,s)}function ActionSubparsers(r){r=r||{},r.dest=r.dest||c.SUPPRESS,r.nargs=c.PARSER,this.debug=!0===r.debug,this._progPrefix=r.prog,this._parserClass=r.parserClass,this._nameParserMap={},this._choicesActions=[],r.choices=this._nameParserMap,Action.call(this,r)}var util=require("util"),format=require("util").format,Action=require("../action"),c=require("../const"),argumentErrorHelper=require("../argument/error");util.inherits(ChoicesPseudoAction,Action),util.inherits(ActionSubparsers,Action),ActionSubparsers.prototype.addParser=function(r,e){var s,t=this;e=e||{},e.debug=!0===this.debug,e.prog||(e.prog=this._progPrefix+" "+r);var i=e.aliases||[];if(e.help||"string"==typeof e.help){var o=e.help;delete e.help;var a=new ChoicesPseudoAction(r,o);this._choicesActions.push(a)}return s=new this._parserClass(e),this._nameParserMap[r]=s,i.forEach(function(r){t._nameParserMap[r]=s}),s},ActionSubparsers.prototype._getSubactions=function(){return this._choicesActions},ActionSubparsers.prototype.call=function(r,e,s){var t=s[0],i=s.slice(1);if(this.dest!==c.SUPPRESS&&(e[this.dest]=t),!this._nameParserMap[t])throw argumentErrorHelper(format('Unknown parser "%s" (choices: [%s]).',t,Object.keys(this._nameParserMap).join(", ")));r=this._nameParserMap[t],r.parseArgs(i,e)},module.exports=ActionSubparsers;