function hasKey(n,t){var e=n;return t.slice(0,-1).forEach(function(n){e=e[n]||{}}),t[t.length-1]in e}function isNumber(n){return"number"==typeof n||(!!/^0x[0-9a-f]+$/i.test(n)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n))}module.exports=function(n,t){function e(n,t){return i.allBools&&/^--[^=]+$/.test(t)||i.strings[n]||i.bools[n]||a[n]}function o(n,t,o){if(!o||!i.unknownFn||e(n,o)||!1!==i.unknownFn(o)){var r=!i.strings[n]&&isNumber(t)?Number(t):t;s(l,n.split("."),r),(a[n]||[]).forEach(function(n){s(l,n.split("."),r)})}}function s(n,t,e){var o=n;t.slice(0,-1).forEach(function(n){o[n]===undefined&&(o[n]={}),o=o[n]});var s=t[t.length-1];o[s]===undefined||i.bools[s]||"boolean"==typeof o[s]?o[s]=e:Array.isArray(o[s])?o[s].push(e):o[s]=[o[s],e]}function r(n){return a[n].some(function(n){return i.bools[n]})}t||(t={});var i={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(i.unknownFn=t.unknown),"boolean"==typeof t["boolean"]&&t["boolean"]?i.allBools=!0:[].concat(t["boolean"]).filter(Boolean).forEach(function(n){i.bools[n]=!0});var a={};Object.keys(t.alias||{}).forEach(function(n){a[n]=[].concat(t.alias[n]),a[n].forEach(function(t){a[t]=[n].concat(a[n].filter(function(n){return t!==n}))})}),[].concat(t.string).filter(Boolean).forEach(function(n){i.strings[n]=!0,a[n]&&(i.strings[a[n]]=!0)});var f=t["default"]||{},l={_:[]};Object.keys(i.bools).forEach(function(n){o(n,f[n]!==undefined&&f[n])});var u=[];-1!==n.indexOf("--")&&(u=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var c=0;c<n.length;c++){var b=n[c];if(/^--.+=/.test(b)){var h=b.match(/^--([^=]+)=([\s\S]*)$/),d=h[1],p=h[2];i.bools[d]&&(p="false"!==p),o(d,p,b)}else if(/^--no-.+/.test(b)){var d=b.match(/^--no-(.+)/)[1];o(d,!1,b)}else if(/^--.+/.test(b)){var d=b.match(/^--(.+)/)[1],v=n[c+1];v===undefined||/^-/.test(v)||i.bools[d]||i.allBools||a[d]&&r(d)?/^(true|false)$/.test(v)?(o(d,"true"===v,b),c++):o(d,!i.strings[d]||"",b):(o(d,v,b),c++)}else if(/^-[^-]+/.test(b)){for(var k=b.slice(1,-1).split(""),g=!1,y=0;y<k.length;y++){var v=b.slice(y+2);if("-"!==v){if(/[A-Za-z]/.test(k[y])&&/=/.test(v)){o(k[y],v.split("=")[1],b),g=!0;break}if(/[A-Za-z]/.test(k[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(v)){o(k[y],v,b),g=!0;break}if(k[y+1]&&k[y+1].match(/\W/)){o(k[y],b.slice(y+2),b),g=!0;break}o(k[y],!i.strings[k[y]]||"",b)}else o(k[y],v,b)}var d=b.slice(-1)[0];g||"-"===d||(!n[c+1]||/^(-|--)[^-]/.test(n[c+1])||i.bools[d]||a[d]&&r(d)?n[c+1]&&/true|false/.test(n[c+1])?(o(d,"true"===n[c+1],b),c++):o(d,!i.strings[d]||"",b):(o(d,n[c+1],b),c++))}else if(i.unknownFn&&!1===i.unknownFn(b)||l._.push(i.strings._||!isNumber(b)?b:Number(b)),t.stopEarly){l._.push.apply(l._,n.slice(c+1));break}}return Object.keys(f).forEach(function(n){hasKey(l,n.split("."))||(s(l,n.split("."),f[n]),(a[n]||[]).forEach(function(t){s(l,t.split("."),f[n])}))}),t["--"]?(l["--"]=new Array,u.forEach(function(n){l["--"].push(n)})):u.forEach(function(n){l._.push(n)}),l};